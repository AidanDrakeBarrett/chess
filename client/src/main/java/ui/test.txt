return switch (cmd) {
        case "register" -> register(params);
        case "login" -> login(params);
        case "create" -> create(params);
        case "list" -> list();
        case "join" -> join(params);
        case "observe" -> join(params);
        case "logout" -> logout();
        case "quit" -> "quit";
        case "move" -> makeMove(params);
        case "legal" -> legalMoves(params);
        case "redraw" -> redraw();
        case "resign" -> resign();
        case "leave" -> leave();
        default -> help();
};

if(state == LOGGED_OUT) {
    return switch (cmd) {
        case "register" -> register(params);
        case "login" -> login(params);
        case "quit" -> "quit";
        case "create", "list", "join", "observe", "logout", "move", "legal", "redraw", "resign", "leave" -> "Error: you must be logged in to use that command\n";
        default -> help();
    };
}
if(state == LOGGED_IN) {
    return switch (cmd) {
        case "create" -> create(params);
        case "list" -> list();
        case "join" -> join(params);
        case "observe" -> join(params);
        case "quit" -> "quit";
        case "logout" -> logout();
        case "register", "login" -> "Error: you can not use that command while already logged in\n";
        case "move", "legal", "redraw", "resign", "leave" -> "Error: you must join a game to use that command\n";
        default -> help();
    };
}
if(state == WATCHING) {
    return switch (cmd) {
        case "redraw" -> redraw();
        case "leave" -> leave();
        case "register", "login" -> "Error: you can not use that command while already logged in\n";
        case "create", "list", "join", "observe", "quit", "logout" -> "Error: please leave your current game first\n";
        case "move", "legal", "resign" -> "Error: only players can use those commands\n";
        default -> help();
    };
}
if(state == IN_GAME) {
    return switch (cmd) {
        case "move" -> move(params);
        case "legal" -> legal(params);
        case "redraw" -> redraw();
        case "resign" -> resign();
        case "leave" -> leave();
        case "register", "login" -> "Error: you can not use that command while already logged in\n";
        case "create", "list", "join", "observe", "quit", "logout" -> "Error: please leave your current game first\n";
        default -> help();
    };
}